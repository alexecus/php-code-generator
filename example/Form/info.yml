name: Form
command: generate:form
description: Generates a form plugin

inputs:
    - ask:
        id: name
        message: What is the form name ?
        defaults: DefaultForm
        normalizers:
            - trim
        validators:
            - empty:
                message: Name of the form should not be empty
            - ends_with:
                message: The form name should end with the word Form
                options: ['Form']

    - confirm:
        id: confirm_twig
        message: Do you want to have a twig template also ?

    - ask:
        id: path
        message: What is the path ?
        defaults: /src/Form

    - confirm:
        id: confirm
        message: Do you confirm generation ?
        terminate: yes

actions:
    - append:
        target: ../assets/scripts/component.ts
        text: import {'${component}'} from '@app/Components/${component}/scripts.ts';
        pattern: /import(*.);/
        unless: /import {'${component}'} from '@app/Components/${component}/scripts.ts'/
        replacements:
            form_name: name

    - template:
        source: template/Form.php.twig
        target: /{path}/{name}.php"
        replacements:
            form_name: name

    - copy:
        if: confirm_twig
        source: template/template.twig
        target: /{path}/template.twig
